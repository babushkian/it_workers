План работ:
- отладить дату рождения. Сделать ее через timestamp, чтобы не было слепых дней (29-31 числа месяца).
- отладить увольнение на пенсию и смерть сотрудников. Как то слишком редко они умирают.
- сделать увольнение и прием на работу двумя разными действиями. Чтобы эти события зачислялись в
разные поля таблиц.
- сделать постепенное открытие фирм, а не все таблицы из списка разом. Тем более изначально в
списке названий фирм их слишком много, мне столько не нужно.


20.04.2022
Когда человек становился взрослым и начинал работу, не делалась запись в базу о том, что он повышен
с безработного до работника. Исправил.

При запуске подсчета статистики по уже имеющейся базе в колонке "опыт" выдает очтрицательные числа.
Потому-что опыт считается как разность текущей даты и дня начала работы. Но при потсчете статистики
о последнем дне симуляции ничего неизвестно. Нужно добавить табличку с одной записью: последним днем
работы.
Табличку я добавил. В свойствах поля прописалл, что оно должно автоматически добавлять текуюую дату
при обновлении таблицы, но не нашел, как можно обновлять запись, все поля которой присваиваются
автоматически. В общем, обновляю дату явно.
Что нельзя вывести опыт работы человека через метод объекта. Так как во время подсчета статистики
половина свойств класса не работает. При обращении к таблице через класс достаются только те данные,
которые есть в таблице (и стандартные методы, __repr__, например). А связывать единственную запись
о дате с каждым человеком я не хочу.

Нужно разобраться с выходом на пенсию все таки.
Исправил, там была проблема, что в проверках на смерть и на пенсию не хватало одного условия.
Но и сейчас не все в порядке. Я смотрю, нет ни одного случая, что человек бы вышел на пенсию,
а потом умер. В базе указывается, что у во всех записях даты смерти и даты выхода на пенсию
совпадают. Возможно после выхода на пенсию проверка на смерть перестает выполняться.


21.04.2022
Исправил ошибку, когда дата смерти всегда совпадала с датой выхода на пенсию. Дело в том, что при
наступлении смерти я всегда "увольнял" сотрудника, даже не проверяя, может он уже на пенсии.

Нужно сделать так, чтобы фирмы возникали не все сразу, а постепенно. Для начала сделал новую
табличку, содержащую все имена фирм.
Сделал так, что сначала инициируются 6 фирм, а потом с некоторй вероятностью появляются новые.
Фирмы действительно появляются. И отмечается дата появления новой фирмы. Но есть проблема. Сотрудники
оказываются не привязаны ни к какой фирме. Программа не падает, просто поля, где должны быть указаны
идентификаторы фирмы остаются пустые. Видимо потому, что старый метод генерации, к какой фирме
привязан человек я удалил, а новый не создал.
Теперь создал, работает корректно. Теперь надо программу, собирающую статистику переделывать.
Но это завтра.

Нужно еще для молодых сделать, чтобы фирам на ними закреплялась не при рождении, а в тот момент,
когда они начинают работать. А то уогда появляются новые фирмы, за ними никто не закреплен, все
взрослеют и идут в первоначальные.
Вообще, все в начале симуляции должны быть безработные. И только когда идут на работу, должны
определять для себя фирму.

25.04.2022
Сделал так, что по умлочанию id фирмы человеку не присваивается. Пока он молодой. это поле равно
None. Только после устройства на работу поле заполняется.
Нужно еще очищать id фирмы после выхода на пенсию. Сейчас поле называется last_firm_id, а надо
переименовать в current_firm_id.
Надо сделать отбельную фирму для безработных - "безработный", а то проблемы возникают с отображение
профиля человека. ьам от человека через отнощение идет отсылка к фирме, а через чирму к названию
фирмы. Если фирма==None, возникает ошибка.
Та кже выделение места под отсутствие работы решает вопрос с записями в таблицу people_firms - о
том, что человек уволился. Если бы там стоял None в поле фирмыЮ было бы странно.
Нонужно дополнительно смотреть, чтобы случайно не возникла фирма с идентификатором безработного.
Тем более возникают записи о людях, которы имеют идентификатор фирмы 1: "безработный", при том, что
они взрослые, но езе не на пенсии. То есть гарантированно работают.
Понял, опять я спутал id фирмы и id названия фирмы. Нужно отдельно создавать фирму для безработных,
а не в перовой генерации фирм.
Назначение фейковой фирмы для безработных еще и тем хорошо, что они могут уволиться с использованием
метода перехода в другую фирму. Главное, не давать людям повышение по должности, пока они нигде не
работают.

Когда пережелал, увидел, что неправильно определяется выход человека на пенсию
Нужно переделать функцию average_retire_age. Видимо там некорректное сравнение с датой смерти,
которая равна None.

27.04.2022
Логика директора:
- При образовании фирмы у нее сразу есть директор.
- при увольнении директора следующим директором становится человек с наибольшей должностью и с
наибольшим опытом. Возможно, еще талант сюда стоит добавить.
- При устройстве на следующую работу директор не может быть директором

По расширению фирм:
если количество людей в фирме больше 15, она может расширяться не более чем на 25% в год. То есть
в начале года определяется количество сотрудников и ставится цель по вакансиям. Если вакансий много,
фирма берет кандидатов более охотно. Допустим: 50% процентов базового шанса, при незаполненных
вакансиях и 0% при заполненном штате. Нбазовый шанс должен модифицироваться талантом и опытом. Ну и
еще надо оценивать сответствие между должностью и опытом. Если опыта мало, а челове претендует на
высокую должность, то вероятность устроиться меньше.

Если человек долго не может устроиться на работу, он начинает понижать планку: мдет в фирмы с плохим
рейтингом, а потом понижает должность, на которую он претендует.

Рейтинг можно считать как среднее талант умножить на должность по сотрудникам. Чтобы
высокопоставленные струдники вносили больший вклад в рейтинг фирмы.
При этом, чем выше рейтинг, тем выше тербования при приеме на работу.

30.04.2022
Сделал присвоение директоров к фирмам. Это непросто получилось. Сначала создаются и инициируются
люди. Все они безработные (приписаны к фирме 1 и имеют лолжность 1). ЗАписи о них в базу не
делаются. Затем фирмам присваиваются директора. А после этого все остальные назначаются в фирмы.
Если человек несовершеннолетний, то делается запись, что он безработный. Так получается, что каждый
человек имеет по одной записи в базу первый день.
Сделано это для того, Чтобы в один день не делалось несколько записей о человеке. Сначала он был
приписан к фирме такой-то но тут же стал директором и переписался на другую фирму. Такие записи в
базе тяжело интерпретировать. Так получается что человек директор в двух фирмах. Но в первой записи
он не был директором.

Возникла проблема при добавлении новых фирм. Там мешанина из директоров начинается. Может быть из-за
того, что метод выбора нового директора, когда уходит старый, не реализован.

Оказывается, при смерти и уходе на пенсию человека не делались отметки в таблицы PeopleFirm и
PeoplePosition. То есть об окончании карьеры можно было узнать только из таблицы People, где были
записи о датах выхода на пенсию и смерти. Добавил эти записи.
Думал, сделать дополнительные статусы для человека "молодой", "пенсионер", "умер", но это
тяжеловато, требует обдумывания, куда их притулить. Может даже в отдельную таблицу. Что, пенсионера
выше директора по должности располагать. Это совсем другие категории. "Мертвый" и "главный инженер"
не очень-то сравнимы.


01.05.2022
Написал несколько запросов к базе, посвященных директорам. Оказывается, они назначаются коррекно при
создании новых фирм в процессе симуляции.

Очень тяжело отследить когда из фирмы уходит директор. То есть я отследил запись, что человек,
который был назначен директором, уволился такого-то числа, но как получить из этого идентификатор
фирмы, из которой он уволился за один запрос я не придумал. Думаю, надо модифицировать табличку
PeopleFirm. Надо в нее записывать две фирмы: из которой человек увольняется и в которую переходит.

04.05.2022
Сделал таблицу статус, она пока что плетется за назначением в фирму, но уже есть полезные вещи.
Явный статус безработного, пенсионера и покойника с датами. По сути из таблицы People можно выкинуть
даты ухода на пенсию и смерти, так как в этой таблице в основном дублирующая информация содержится.
Остается выбросить безработность из списка фирм, так как за это теперь статус отвечает.

12.05.2022
Осматриваю свой код после перерыва, пытаюсь втянуться.
Понятно, что из списка фирм нужно убрать фирму безработный. Потому что у меня firm_id==1 это
суррогатная фирма для всех безработных. И при обработке фирм постоянно проверяется условие, не
безработный ли человек. Это надо убрать, фирмы должны обрабатываться единообразно.
Вот, раздумываю нажд тем, нужна ли позиция "безработный". Или со стажера начинать. По идее, сущность
"позиция" в отрыве от работы не нужна. Но все равно, если человек уволился, его последняя позиция
сохраняется. Чтобы устроиться на ту же позицию. Ну или если человек на пенсию ушел, понятно, какова
была его последняя позиция. Пожалуй, оставлю. Но она будет действовать только на молодых, которые
еще не работали.
Проверку фейковой фирмы нужно заменть на проверку статуса безработности. Возмножн провекру даты
выхода на пенсию и смерти тоже нужно заменить на проверку статуса.
Проверку даты начала работы тоже надо внимательнее рассмотреть, можно ли ее заменить на проверку
статуса.
Но если я уберу фейковую фирму для безработных, то придется явно прописывать переход в состояние
безработного.

15.05.2022
Выкинул из списка фирм фейковую фирму для безработных. Протестировал. Вроде нормально работает.
Но теперь никто не может статьб юезработным, кроме как уйти на пенсию или умереть, потому что
безработная фирма удалена, а процедура, позволяющая уволиться не реализована.
Столкнулся с таким случаем, когда ушел директор фирмы. А кроме него в этой фирме никого не было.
В итоге при попытке повыскать ему замену из коллектива программа вылетела, так как список был
пустой. Надо такие фирмы с нулевым количеством сотрудников закрывать.
Сделал методы ухода на больничный и увольнения. По сути они оказались очень похожи. Только в случае
увольнения переменная текущей фимы сбрасывалась в None, а при болезни оставалась без изменения.

15.05.2022
Переделал расчет рейтинга фирмы. Теперь он является средним произведения таланта и должности всех
сотрудников фирмы. И вычисляется он раз в квартал, а не раз в месяц.